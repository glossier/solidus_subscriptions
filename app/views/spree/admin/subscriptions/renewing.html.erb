<% content_for :page_title do %>
  <%= Spree.t(:'admin.subscription.renewing') %>
<% end %>

<% unless @subscriptions.empty? %>
  <div class="pagination">
    <%= page_entries_info @collection %>
  </div>
  <br/>
  <br/>
  <table id="listing_subscriptions" class="index responsive">
    <thead>
      <tr>
        <th>id</th>
        <th>order date</th>
        <th>number</th>
        <th>email</th>
        <th>renewal date</th>
        <th>attempts</th>
      </tr>
    </thead>
    <tbody>
      <% @subscriptions.each do |subscription| %>
        <tr>
          <td><%= link_to subscription.id, edit_admin_subscription_path(subscription), target: '_blank' %>
          <td><%= l(subscription.last_order_date, format: :subscription_date_format) %>
          <td><%= link_to subscription.orders.first.number, edit_admin_order_path(subscription.orders.first), target: '_blank' %>
          <td><%=link_to subscription.user.email, edit_admin_user_path(subscription.user), target: '_blank' %>
          <td><%= l(subscription.next_shipment_date, format: :subscription_date_format) %>
          <td><%= subscription.failure_count %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="no-objects-found">
    <%= t(:no_subscriptions_found)%>
  </div>
<% end %>

<%= paginate @subscriptions %>
